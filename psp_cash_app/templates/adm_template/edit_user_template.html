{% extends 'adm_template/base_template.html' %}
{% block page_title %} 
Edit USER | NO : {{ user.id }}
<!-- | Subject Name : {{ subject.subject_name }} | Subject ID : {{ subject.id }} -->
{% endblock page_title %}
{% block main_content %}
    <!-- Main content -->
    <style>
    #showPasswordButton {
      background: none;
      border: none;
      cursor: pointer;
    }
    
    #showPasswordButton::before {
      content: "\f06e"; /* Code unicode pour l'icône d'œil */
      font-family: "Font Awesome 5 Free";
      font-weight: 900;
      font-size: 18px;
      margin-left: -25px;
      margin-right: 5px;
    }
    
    #passwordInput {
      padding-right: 40px; /* Pour éviter que l'icône ne chevauche le texte */
    }
  </style>
    <section class="content">
        <div class="container-fluid">
          <div class="row">
              <div class="col-md-12">
                    <!-- general form elements -->
                <div class="card card-primary">
                      <div class="card-header">
                        <h3 class="card-title">Edit USER</h3>
                      </div>
                      <!-- /.card-header -->
                      <!-- form start -->
                      <form role="form" action="/edit_user_save" method="post">
                        {% csrf_token %}
                        <div class="card-body">
                            <div class="form-group">
                                <label>ID User</label>
                                <input type="text" class="form-control" name="user_id"   value="{{ usercustom.id  }}" >   
                            </div>
                          <!--
                          <div class="form-group">
                                <label>Password</label>
                                <input type="text" class="form-control" name="password">
                          </div>
                         
                          <div class="form-group">
                            <label>Last Login</label>
                            <input type="text" class="form-control" name="last_login"  value="{{ user.last_login }}">
                          </div>                        
                           
                         
                          <div class="form-group">
                            <label>First Name</label>
                            <input type="text" class="form-control" name="first_name"  value="{{ user.first_name }}">
                          </div>
                          <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" class="form-control" name="last_name"  value="{{ user.last_name }}">
                          </div>
                          <div class="form-group">
                            <label >Email</label>
                            <input type="text" class="form-control" name="email" value="{{ user.email }}">
                          </div>
                          <div class="form-group">
                            <label >Date Added</label>
                            <input type="text" class="form-control" name="date_joined" value="{{ user.date_joined }}">
                         </div>
                           -->
                           <div class="form-group">
                            <label>Username</label>
                            <input type="text" class="form-control" name="username"  value="{{ usercustom.username }}" disabled>
                          </div>
                          <div class="form-group">
                            <label>Password</label>
                            <input type="password" class="form-control" name="password"   value="{{ usercustom.password }}" >
                          </div>
                          <div class="form-group">
                            <label>IS Super User</label>
                            <select class="form-control"  name="is_superuser">
                              <option value="{{usercustom.is_superuser}}" {% if usercustom.is_superuser == True %} selected {% endif %}>True</option>
                              <option value="{{usercustom.is_superuser}}" {% if usercustom.is_superuser == False %} selected {% endif %}>False</option>
                            </select>
                          </div>
                          <div class="form-group">
                            <label >Is Staff</label>
                            <select class="form-control"  name="is_staff">
                              <option value="{{user.is_staff}}" {% if usercustom.is_staff == True %} selected {% endif %}>True</option>
                              <option value="{{user.is_staff}}" {% if usercustom.is_staff == False %} selected {% endif %}>False</option>
                            </select>
                         </div>

                         <div class="form-group">
                            <label >Is Active</label>
                            <select class="form-control"  name="is_active">
                              <option value="{{user.is_active}}" {% if usercustom.is_active == True %} selected {% endif %}>True</option>
                              <option value="{{user.is_active}}" {% if usercustom.is_active == False %} selected {% endif %}>False</option>
                            </select>
                         </div>
                         
                         <div class="form-group">
                            <label >Type User</label>
                            <input type="text" class="form-control" name="user_type" value="{{ usercustom.user_type }}">
                         </div>
                         <!--
                         <div class="form-group">
                            <label >Muso</label>
                            <select class="form-control"  name="muso">
                                {% for muso in muso_info %}
                                  <option value="{{ muso.id}}" {% if muso.id == Membres.muso_id.id %} selected {% endif %}>{{ muso.nom_muso }} </option>
                                {% endfor %}
                                </select>
                         </div>
                        -->
   
                          <div class="form-group">
                            {% if messages %}
                            <div class="col-12">
                              {% for message in messages %}
                              {% if message.tags == 'error' %}
                              <div class="alert alert-danger" style="margin-top:10px ;">{{ message }}</div>
                              {% endif %}
                              {% if message.tags == 'success' %}
                              <div class="alert alert-success" style="margin-top:10px ;">{{ message }}</div>
                              {% endif %}
                              {% endfor %}
                            </div>
                            {% endif %} 
                          </div>
                        </div>
                        <!-- /.card-body -->
        
                        <div class="card-footer">
                          <button type="submit" class="btn btn-primary btn-block">Edit User</button>
                        </div>
                      </form>
                </div>
                    <!-- /.card -->
              </div>
          </div>
        </div>
      </section>
      <!-- /.content -->
{% endblock main_content %}

{% block custom_js %}
    <script>
      
      document.getElementById("showPasswordButton").addEventListener("click", function() {
        var passwordInput = document.getElementById("passwordInput");
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
        } else {
          passwordInput.type = "password";
        }
      });

    </script>
    {% endblock custom_js %}